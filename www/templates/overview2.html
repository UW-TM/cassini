<html>
  <head>
   <title>Cassini Overview</title>
   <link rel="shortcut icon" href="/static/images/saturn.ico">
   <!-- Bootstrap core CSS -->
   <link href="/static/lib/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
   <!-- Custom styles for this template -->
   <link href="/static/css/cassini.css" rel="stylesheet">
  
   <style type="text/css" title="currentStyle">
          @import "/static/lib/DataTables/media/css/demo_page.css";
          @import "/static/lib/DataTables/media/css/demo_table.css";
   </style>
   <link rel="stylesheet" type="text/css" href="/static/css/DT_bootstrap.css">

   <!-- Placed at the end of the document so the pages load faster -->
   <script src="/static/lib/jquery/jquery.js"></script> 
   <script src="/static/lib/bootstrap/dist/js/bootstrap.min.js"></script> 
        
   <script type="text/javascript" language="javascript" src="/static/lib/DataTables/media/js/jquery.js"></script>
   <script type="text/javascript" language="javascript" src="/static/lib/DataTables/media/js/jquery.dataTables.js"></script>

   <script type="text/javascript" charset="utf-8" language="javascript" src="/static/js/DT_bootstrap.js"></script>

   <!-- Esnet D3 based graphs-->
   <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>

   <script src="/static/lib/esviz/areachart.js"></script> 
   <script src="/static/js/cassini_esviz.js"></script>
   <script src="/static/js/cassini.js"></script>

   <script>
   var width = 960,
    height = 500;

   var color = d3.scale.category20();

   var force = d3.layout.force()
    .charge(-120)
    .linkDistance(30)
    .size([width, height]);

   var svg = d3.select("div.topo2").append("svg")
    .attr("width", width)
    .attr("height", height);

   d3.json("/static/topo.json", function(error, graph) {
      force
      .nodes(graph.nodes)
      .links(graph.links)
      .start();

   var link = svg.selectAll(".link")
      .data(graph.links)
      .enter().append("line")
      .attr("class", "link")
      .style("stroke-width", function(d) { return Math.sqrt(d.value); });

    var node = svg.selectAll(".node")
      .data(graph.nodes)
    .enter().append("circle")
      .attr("class", "node")
      .attr("r", 15)
      .style("fill", function(d) { return color(d.group); })
      .call(force.drag);

    node.append("title")
      .text(function(d) { return d.name; });

    node.append("text")
      .attr("class", "word")
      .attr("dy", ".35em")
      .text(function(d) { console.log(d.name); return d.name; });

    force.on("tick", function() {
      link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

       node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });
  });
});
</script>

</head>
<body>

{% include 'nav.html' %}

<!-- Wrap all page content here -->
<div id="wrap">

<div class="page-header">
    <h3>Cassini Network Edge Controller</h3>
</div>
  
<div class="row">
   <div class="col-md-3">
  <h4>Totals</h4>

  <table class="table table-hover">
     <tr>
        <td>Switches</td>
        <td>{{ tot_switches }}</td>
     </tr>
     <tr>
       <td>Hosts</td>
       <td>{{ tot_hosts }} </td>
     </tr> 
     <tr>
        <td>Users</td>
        <td>{{ tot_users }}</td>
     </tr> 
   </table>

 </div>
 
 <div class="col-md-9">

   <h4>Topology</h4>


     <div id="topo2"></div>
 
   <h4>Active Hosts</h4>
     <div id="total_macs"></div>  
     

   <h4>Active Users</h4>
     <div id="total_users"></div>
<!-- 
 
   <h4>Switches</h4>  
     <div id="total_switches">
     </div>
   <h4>Hosts</h4>  
     <div id="total_macs">
     </div>
   <h4>Users</h4>  
     <div id="total_users">
     </div>
-->     
  </div>
</div> 

{% include 'footer_nojs.html' %}
